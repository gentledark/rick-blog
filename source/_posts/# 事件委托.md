---
title: DOM事件模型和事件委托
date: 2022-2-20
---

### DOM 事件模型和事件委托

### 事件委托是指将一个元素的响应事件函数绑定到另一个元素上

例如当一个 ul 中有多个 li，此时想对 li 绑定响应事件，那么需要绑定多次，而事件委托可以绑定在其父元素上，只需绑定一次即可实现目的

```html
<ul class="ul">
  <li class="li1">li1</li>
  <li class="li2">li2</li>
  <li class="li3">li3</li>
  <li class="li4">li4</li>
  <li class="li5">li5</li>
  <li class="li6">li6</li>
</ul>
```

当想实现点击 li 就触发指定动作时，可以将动作绑定至 ul，但与此同时产生了顺序问题，即多个时间的触发顺序是从低等级元素开始还是高等级元素开始
由此 w3c 设定了捕获冒泡过程，捕获指的是从顶级元素开始触发事件，冒泡指的是从最低级元素开始触发事件，即：
**捕获**：window -> document -> html -> body ->div
**冒泡**：与捕获相反顺序
使用方法

```javascript
selector.addEventListener("click", fn, bool);
```

addEventlistener 绑定当点击时触发 fn 函数，bool 值表示此动作时冒泡还是捕获，默认不填写为 false 为冒泡，true=捕获
特例：

1. 当只有一个 div 被监听（不考虑父子同时被监听）
2. 用户点击的就是这个 div
3. 同时监听冒泡和捕获的 click 事件
   那么此时的触发顺序是谁先监听先触发谁

### 如何阻止默认动作

默认动作指的是元素的默认动作，例如 a 标签点击的默认动作就是让跳转 href 的地址
可以用而想要取消默认的动作，可以使用 preventDefault()方法

```javascript
slector.addEventListener("click", function (event) {
  event.preventDefault();
});
```

### 如何阻止冒泡

捕获动作不可以阻止
冒泡可以用 stopPropagation()阻止

```javascript
selector.addEventListener(
  "click",
  (e) => {
    e.stopPropagation();
  },
  bool
);
```

但是有一些冒泡事件无法取消，可以查看 mdn 事件中的 cancelable 属性
