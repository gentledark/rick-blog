---
title: 节流防抖
date: 2022-6-18
---

#### 节流防抖

一些函数思想和写法

##### 节流

在特殊情况下，可能需要类似于游戏**技能冷却**的写法，即**规定时间内只能执行一次**

```js
const throttle = (fn, time, args) => {
  let cooling = false; //相当于闭包，冷却计时
  return (...args) => {
    //传入args，直接return一个函数，可以多次使用
    if (cooling) return;
    fn.call(undefined, ...args); //防止浏览器改动this，也可以传参把this传进使用
    cooling = true; //置于冷却中
    setTimeout(() => {
      cooling = false; //时间到了之后冷却结束
    }, time);
  };
};
```

##### 防抖

防抖是防止短时间内多次触发相同动作，造成资源浪费或卡顿，即**短时间内多次触发，但是只有最后一次会在一段时间后实际执行**

```js
const debounce = (fn, time, args) => {
  let timer = null; //设置一个计时器
  return (...args) => {
    //传入args，并返回一个函数
    if (timer !== null) {
      clearTimeout(timer); // 如果timer不为空，则此时在计时，打断计时，重新开始计时
    }
    timer = setTimeout(() => {
      //重新开始计时
      fn.call(undefined, ...args); // 计时结束调用fn
      timer = null; //计时器清零
    }, time);
  };
};
```
